<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Delicias Verdes - Menú</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />
  <!-- SweetAlert2 -->
  <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet" />
  <!-- Estilos personalizados -->
  <link rel="stylesheet" href="css/style.css" />
</head>

<body>
  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-lg fixed-top" style="background-color: rgb(14,123,22); z-index:1000;">
    <div class="container-fluid text-white">
      <a class="navbar-brand d-flex align-items-center text-white" href="#">
        <i class="bi bi-basket3-fill me-2" style="font-size:1.4rem"></i>
        <div>
          <div style="font-weight:700;">Delicias Verdes</div>
          <small style="opacity:0.9;">Repostería • Heladería • Panadería • Gourmet</small>
        </div>
      </a>

      <!-- PERFIL MODERNO CON TRANSICIÓN -->
      <div class="position-relative">
        <div class="d-flex align-items-center text-white profile-toggle">
          <div class="me-2">
            <div class="avatar-circle bg-white text-success">
              <i class="bi bi-person-fill"></i>
            </div>
          </div>
          <div>
            <span id="userName" class="fw-bold">Invitado</span>
            <i class="bi bi-caret-down-fill ms-1 small"></i>
          </div>
        </div>

        <!-- DROPDOWN CON TRANSICIÓN -->
        <div id="profileDropdown" class="shadow-lg">
          <div class="p-3 border-bottom">
            <div class="d-flex align-items-center">
              <div class="me-3">
                <div class="avatar-circle bg-success text-white">
                  <i class="bi bi-person-fill"></i>
                </div>
              </div>
              <div>
                <div id="dropdownUserName" class="fw-bold text-dark">Luíro</div>
                <small id="dropdownRol" class="text-muted">Cliente</small>
              </div>
            </div>
          </div>
          <div class="p-2">
            <a href="../perfil/perfil.html" class="dropdown-item d-flex align-items-center hover-bg">
              <i class="bi bi-person me-3 text-success" ></i>
              <span style="color: var(--verde-oscuro);">Mi perfil</span>
            </a>
            <a href="#" id="logoutBtn" class="dropdown-item d-flex align-items-center hover-bg text-danger">
              <i class="bi bi-box-arrow-right me-3"></i>
              <span>Cerrar sesión</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <!-- MAIN LAYOUT -->
  <div class="container-fluid mt-5 pt-4">
    <div class="d-flex">
      <!-- SIDEBAR -->
      <aside class="col-lg-2 sidebar p-3">
        <div class="px-2">
          <h5 class="mb-3">Categorías</h5>
          <div id="categoriaList" class="d-grid gap-2">
            <button class="btn category-btn text-start active" onclick="filterByCategory('Todos')">Todos</button>
            <button class="btn category-btn text-start" onclick="filterByCategory('Repostería')">Repostería</button>
            <button class="btn category-btn text-start" onclick="filterByCategory('Heladería')">Heladería</button>
            <button class="btn category-btn text-start" onclick="filterByCategory('Panadería')">Panadería</button>
            <button class="btn category-btn text-start" onclick="filterByCategory('Gourmet')">Gourmet</button>
            <button class="btn category-btn text-start" onclick="filterByCategory('Bebidas')">Bebidas</button>
          </div>

          <hr />
          <div class="mb-3">
            <h6>Buscar</h6>
            <input id="searchInput" class="form-control form-control-sm" placeholder="Buscar producto..." />
          </div>

          <div class="mb-3">
            <h6>Filtrar por precio</h6>
            <div class="d-flex gap-2">
              <input id="minPrice" type="number" class="form-control form-control-sm" placeholder="Mín" />
              <input id="maxPrice" type="number" class="form-control form-control-sm" placeholder="Máx" />
            </div>
            <button id="applyPrice" class="btn btn-sm mt-2 w-100" style="background: var(--verde-medio); color: white">
              Aplicar
            </button>
          </div>

          <div class="mb-3">
            <h6>Ordenar</h6>
            <select id="sortSelect" class="form-select form-select-sm">
              <option value="default">Relevancia</option>
              <option value="price-asc">Precio: menor a mayor</option>
              <option value="price-desc">Precio: mayor a menor</option>
            </select>
          </div>
        </div>
      </aside>

      <!-- MAIN CONTENT -->
      <main class="col-lg-10 p-4">
        <h3 class="mb-4">Productos</h3>

        <!-- GRID DE PRODUCTOS -->
        <div id="productsGrid" class="row g-3">
          <div class="col-12 text-center">
            <div class="spinner-border text-success" role="status"></div>
          </div>
        </div>

        <footer class="mt-5">

        </footer>
      </main>
    </div>
  </div>

  <!-- BOTÓN CARRITO -->
  <button class="btn cart-fab btn-lg rounded-circle text-white" style="background: var(--verde-oscuro)"
    data-bs-toggle="offcanvas" data-bs-target="#cartOffcanvas">
    <i class="bi bi-cart-check-fill"></i>
    <span id="cartCount" class="badge bg-light text-dark ms-1">0</span>
  </button>

  <!-- OFFCANVAS CARRITO -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="cartOffcanvas">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title">Tu carrito</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas"></button>
    </div>
    <div class="offcanvas-body d-flex flex-column">
      <div id="cartItems" class="mb-3"></div>
      <div class="mt-auto">
        <div class="d-flex justify-content-between align-items-center mb-2">
          <strong>Total:</strong>
          <strong id="cartTotal">$0.00</strong>
        </div>
        <div class="d-grid gap-2">
          <button id="checkoutBtn" class="btn" style="background: var(--verde-medio); color: white">
            Encargar para recoger
          </button>
          <button id="reserveFromCart" class="btn btn-outline-secondary">
            Hacer reserva (mesa)
          </button>
          <button id="clearCart" class="btn btn-light">Vaciar carrito</button>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL DETALLE PRODUCTO -->
  <div class="modal fade" id="productModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content shadow-lg overflow-hidden">
        <div class="modal-header bg-success text-white">
          <h5 class="modal-title">Detalles del Producto</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body p-3">
          <div class="text-center mb-3">
            <img id="modalImg" class="img-fluid rounded" style="max-height:180px; object-fit:cover; width:100%; max-width:300px;">
          </div>
          <div class="table-responsive">
            <table class="table table-bordered table-sm text-center align-middle mb-0">
              <tbody>
                <tr>
                  <th class="bg-light" style="width:30%;">Producto</th>
                  <td id="modalTitle" class="text-break"></td>
                </tr>
                <tr>
                  <th class="bg-light">Descripción</th>
                  <td id="modalDesc" class="text-break small" style="line-height:1.4;"></td>
                </tr>
                <tr>
                  <th class="bg-light">Precio</th>
                  <td id="modalPrice" class="fw-bold text-success"></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-outline-success" data-bs-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- SCRIPTS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="js/script.js"></script>
</body>

</html>